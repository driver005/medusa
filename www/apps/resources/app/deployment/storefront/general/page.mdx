export const metadata = {
  title: `General Deployment Guide for the Next.js Starter`,
}

# {metadata.title}

<Note type="soon">

The following deployment guide doesn't support Medusa v2 yet.

</Note>

In this guide, you’ll learn the general steps to follow when deploying the Next.js Starter.

<Note type="check">

- Deployed Medusa application.
- [GitHub repository with the Next.js Starter's code](https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-new-repository).

</Note>

## Deploy to Hosting Provider

The steps to deploy the Next.js Starter are different based on the hosting provider you use. The following points cover common configurations across hosting providers:

- If your hosting provider supports choosing a framework preset, set it to Next.js. You can then skip setting the build command and output directory as they are default Next.js configurations. If not:
    - Set the build command of your deployed project to the `build` command:

    ```bash npm2yarn
    npm run build
    ```

    - Set the output directory of your deployed project to `.next`.
- Add the following environment variables:
    - `NEXT_PUBLIC_MEDUSA_BACKEND_URL`: The URL of your deployed Medusa application.
    - `NEXT_PUBLIC_BASE_URL`: The URL of the storefront. If you still don’t have the URL you can wait until later to add it. However, you may face errors when using the storefront.
    - `REVALIDATE_SECRET`: A secret used for revalidating data. Learn more in the [Next.js documentation](https://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating#on-demand-revalidation).

---

## Configure CORS on the Deployed Medusa Application

To send requests from the Next.js Starter storefront to the Medusa application, you must set the `STORE_CORS` environment variable on your Medusa application to the storefront’s URL:

```bash
STORE_CORS=<STORE_URL>
```

Where `<STORE_URL>` is the URL of your storefront.

Then, restart your Medusa application. Once the Medusa application is running again, you can use your storefront.
